<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phone Shell è¿ç§»æµ‹è¯•</title>
    
    <!-- å¼•å…¥jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <!-- å¼•å…¥phone-shellç³»ç»Ÿ -->
    <link rel="stylesheet" href="styles/phone-shell.css">
    <script src="apps/phone-shell.js"></script>
    
    <!-- å¼•å…¥phone-interface -->
    <link rel="stylesheet" href="styles/phone-interface.css">
    <script src="apps/phone-interface.js"></script>
    
    <!-- å¼•å…¥QQåº”ç”¨ -->
    <link rel="stylesheet" href="styles/qq-app.css">
    <script src="apps/qq-app.js"></script>
    
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-header h1 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .test-header p {
            color: #666;
            font-size: 16px;
        }
        
        .test-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .test-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            background: #007bff;
            color: white;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .test-btn:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }
        
        .test-btn.success {
            background: #28a745;
        }
        
        .test-btn.warning {
            background: #ffc107;
            color: #333;
        }
        
        .test-status {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }
        
        .status-item:last-child {
            border-bottom: none;
        }
        
        .status-label {
            font-weight: 600;
            color: #333;
        }
        
        .status-value {
            font-family: monospace;
            background: #e9ecef;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .status-value.success {
            background: #d4edda;
            color: #155724;
        }
        
        .status-value.error {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>ğŸ“± Phone Shell ç³»ç»Ÿè¿ç§»æµ‹è¯•</h1>
            <p>æµ‹è¯•æ‰€æœ‰åº”ç”¨çš„çŠ¶æ€æ ç»„ä»¶æ˜¯å¦æˆåŠŸè¿ç§»åˆ°ç»Ÿä¸€çš„phone-shellç³»ç»Ÿ</p>
        </div>
        
        <div class="test-buttons">
            <button class="test-btn" onclick="testPhoneInterface()">æµ‹è¯•æ‰‹æœºç•Œé¢</button>
            <button class="test-btn" onclick="testPhoneShell()">æµ‹è¯•Phone Shell</button>
            <button class="test-btn" onclick="testTimeUpdate()">æµ‹è¯•æ—¶é—´æ›´æ–°</button>
            <button class="test-btn" onclick="testThemeSwitch()">æµ‹è¯•ä¸»é¢˜åˆ‡æ¢</button>
            <button class="test-btn warning" onclick="checkSystemStatus()">æ£€æŸ¥ç³»ç»ŸçŠ¶æ€</button>
        </div>
        
        <div class="test-status" id="test_status">
            <div class="status-item">
                <span class="status-label">Phone Shell ç³»ç»Ÿ:</span>
                <span class="status-value" id="phone_shell_status">æœªæ£€æµ‹</span>
            </div>
            <div class="status-item">
                <span class="status-label">Phone Interface:</span>
                <span class="status-value" id="phone_interface_status">æœªæ£€æµ‹</span>
            </div>
            <div class="status-item">
                <span class="status-label">æ—¶é—´æ›´æ–°:</span>
                <span class="status-value" id="time_update_status">æœªæ£€æµ‹</span>
            </div>
            <div class="status-item">
                <span class="status-label">å½“å‰æ—¶é—´:</span>
                <span class="status-value" id="current_time">--:--</span>
            </div>
            <div class="status-item">
                <span class="status-label">çŠ¶æ€æ å…ƒç´ :</span>
                <span class="status-value" id="status_bar_elements">æœªæ£€æµ‹</span>
            </div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–æµ‹è¯•
        $(document).ready(function() {
            console.log('ğŸš€ å¼€å§‹Phone Shellè¿ç§»æµ‹è¯•...');
            
            // æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
            setTimeout(() => {
                checkSystemStatus();
                updateCurrentTime();
                setInterval(updateCurrentTime, 1000);
            }, 1000);
        });
        
        // æµ‹è¯•æ‰‹æœºç•Œé¢
        function testPhoneInterface() {
            console.log('ğŸ“± æµ‹è¯•æ‰‹æœºç•Œé¢...');
            
            if (typeof window.PhoneInterface !== 'undefined') {
                try {
                    window.PhoneInterface.init();
                    window.PhoneInterface.show();
                    updateStatus('phone_interface_status', 'âœ… æ­£å¸¸', 'success');
                } catch (error) {
                    console.error('æ‰‹æœºç•Œé¢æµ‹è¯•å¤±è´¥:', error);
                    updateStatus('phone_interface_status', 'âŒ é”™è¯¯', 'error');
                }
            } else {
                updateStatus('phone_interface_status', 'âŒ æœªæ‰¾åˆ°', 'error');
            }
        }
        
        // æµ‹è¯•Phone Shellç³»ç»Ÿ
        function testPhoneShell() {
            console.log('ğŸ—ï¸ æµ‹è¯•Phone Shellç³»ç»Ÿ...');
            
            if (typeof window.PhoneShell !== 'undefined') {
                try {
                    const testContent = '<div style="padding: 20px; text-align: center;"><h2>æµ‹è¯•å†…å®¹</h2><p>Phone Shellç³»ç»Ÿæ­£å¸¸å·¥ä½œ</p></div>';
                    const shellHTML = window.PhoneShell.createShellHTML(testContent, 'test_shell');
                    
                    // ç§»é™¤ä¹‹å‰çš„æµ‹è¯•shell
                    $('#test_shell').remove();
                    
                    // æ·»åŠ æ–°çš„æµ‹è¯•shell
                    $('body').append(shellHTML);
                    window.PhoneShell.show('test_shell');
                    window.PhoneShell.startTimeUpdate('test_shell');
                    
                    updateStatus('phone_shell_status', 'âœ… æ­£å¸¸', 'success');
                } catch (error) {
                    console.error('Phone Shellæµ‹è¯•å¤±è´¥:', error);
                    updateStatus('phone_shell_status', 'âŒ é”™è¯¯', 'error');
                }
            } else {
                updateStatus('phone_shell_status', 'âŒ æœªæ‰¾åˆ°', 'error');
            }
        }
        
        // æµ‹è¯•æ—¶é—´æ›´æ–°
        function testTimeUpdate() {
            console.log('â° æµ‹è¯•æ—¶é—´æ›´æ–°...');
            
            if (typeof window.PhoneShell !== 'undefined') {
                try {
                    window.PhoneShell.startTimeUpdate('test_shell');
                    updateStatus('time_update_status', 'âœ… æ­£å¸¸', 'success');
                } catch (error) {
                    console.error('æ—¶é—´æ›´æ–°æµ‹è¯•å¤±è´¥:', error);
                    updateStatus('time_update_status', 'âŒ é”™è¯¯', 'error');
                }
            } else {
                updateStatus('time_update_status', 'âŒ ç³»ç»Ÿæœªæ‰¾åˆ°', 'error');
            }
        }
        
        // æµ‹è¯•ä¸»é¢˜åˆ‡æ¢
        function testThemeSwitch() {
            console.log('ğŸ¨ æµ‹è¯•ä¸»é¢˜åˆ‡æ¢...');
            
            if (typeof window.PhoneShell !== 'undefined') {
                try {
                    const themes = ['classic', 'dark', 'pink', 'blue', 'green'];
                    let currentIndex = 0;
                    
                    const switchTheme = () => {
                        const theme = themes[currentIndex];
                        window.PhoneShell.setTheme(theme, 'test_shell');
                        console.log(`åˆ‡æ¢åˆ°ä¸»é¢˜: ${theme}`);
                        
                        currentIndex = (currentIndex + 1) % themes.length;
                        
                        if (currentIndex === 0) {
                            console.log('ä¸»é¢˜åˆ‡æ¢æµ‹è¯•å®Œæˆ');
                            return;
                        }
                        
                        setTimeout(switchTheme, 1000);
                    };
                    
                    switchTheme();
                } catch (error) {
                    console.error('ä¸»é¢˜åˆ‡æ¢æµ‹è¯•å¤±è´¥:', error);
                }
            }
        }
        
        // æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
        function checkSystemStatus() {
            console.log('ğŸ” æ£€æŸ¥ç³»ç»ŸçŠ¶æ€...');
            
            // æ£€æŸ¥Phone Shell
            if (typeof window.PhoneShell !== 'undefined') {
                updateStatus('phone_shell_status', 'âœ… å·²åŠ è½½', 'success');
            } else {
                updateStatus('phone_shell_status', 'âŒ æœªåŠ è½½', 'error');
            }
            
            // æ£€æŸ¥Phone Interface
            if (typeof window.PhoneInterface !== 'undefined') {
                updateStatus('phone_interface_status', 'âœ… å·²åŠ è½½', 'success');
            } else {
                updateStatus('phone_interface_status', 'âŒ æœªåŠ è½½', 'error');
            }
            
            // æ£€æŸ¥çŠ¶æ€æ å…ƒç´ 
            const statusBarElements = $('.phone-shell-status-bar, .phone-shell-status-time, .phone-shell-status-icons').length;
            if (statusBarElements > 0) {
                updateStatus('status_bar_elements', `âœ… æ‰¾åˆ° ${statusBarElements} ä¸ª`, 'success');
            } else {
                updateStatus('status_bar_elements', 'âŒ æœªæ‰¾åˆ°', 'error');
            }
        }
        
        // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
        function updateStatus(elementId, text, className = '') {
            const $element = $(`#${elementId}`);
            $element.text(text);
            $element.removeClass('success error');
            if (className) {
                $element.addClass(className);
            }
        }
        
        // æ›´æ–°å½“å‰æ—¶é—´
        function updateCurrentTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('zh-CN', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            updateStatus('current_time', timeStr);
        }
    </script>
</body>
</html>
