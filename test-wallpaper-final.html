<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ç¾åŒ–åº”ç”¨æœ€ç»ˆæµ‹è¯•</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
        background: #f5f5f5;
      }

      .test-container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .test-section {
        margin-bottom: 30px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
      }

      .test-section h3 {
        margin-top: 0;
        color: #333;
      }

      .status {
        padding: 10px;
        margin: 10px 0;
        border-radius: 4px;
      }

      .status.success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }

      .status.error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }

      .status.info {
        background: #d1ecf1;
        color: #0c5460;
        border: 1px solid #bee5eb;
      }

      button {
        background: #007bff;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        margin: 5px;
      }

      button:hover {
        background: #0056b3;
      }

      .demo-area {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 600px;
        background: #f0f0f0;
        border-radius: 8px;
        margin: 20px 0;
      }

      .test-controls {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin: 15px 0;
      }

      .test-result {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 4px;
        padding: 10px;
        margin: 10px 0;
        font-family: monospace;
        font-size: 12px;
      }
    </style>
  </head>
  <body>
    <div class="test-container">
      <h1>ğŸ¨ ç¾åŒ–åº”ç”¨æœ€ç»ˆåŠŸèƒ½æµ‹è¯•</h1>

      <div class="test-section">
        <h3>ğŸ¯ æµ‹è¯•ç›®æ ‡</h3>
        <p>éªŒè¯ä»¥ä¸‹åŠŸèƒ½æ˜¯å¦æ­£ç¡®å®ç°ï¼š</p>
        <ul>
          <li>âœ… QQå’ŒèŠå¤©èƒŒæ™¯é¡µé¢ä¸æ˜¾ç¤ºæ¨¡å¼åˆ‡æ¢æŒ‰é’®</li>
          <li>âœ… ç¾åŒ–ä¸»é¢˜ç•Œé¢æ”¹ä¸ºè¾¹æ¡†é¢œè‰²å’Œå›¾æ ‡é¢œè‰²é€‰æ‹©</li>
          <li>âœ… åˆ é™¤åŸæœ‰çš„ä¸»é¢˜é€‰æ‹©ç³»ç»Ÿ</li>
          <li>âœ… æ·»åŠ ç”¨æˆ·è‡ªå®šä¹‰é¢œè‰²åŠŸèƒ½</li>
          <li>âœ… ä¿ç•™æ‰‹æœºå£çº¸ç•Œé¢çš„å®Œæ•´åŠŸèƒ½</li>
          <li>ğŸ†• é¡µé¢ç¾åŒ–ï¼šæ”¹è¿›ç•Œé¢å¸ƒå±€å’Œè§†è§‰æ•ˆæœ</li>
          <li>ğŸ†• ä¿®å¤è‡ªåŠ¨è·³è½¬ï¼šé˜²æ­¢ç‚¹å‡»åé¡µé¢æ»šåŠ¨åˆ°é¡¶éƒ¨</li>
          <li>ğŸ†• ä¿®å¤å›¾æ ‡é¢œè‰²ï¼šç¡®ä¿ä¿¡å·ç”µé‡å›¾æ ‡æ­£ç¡®åº”ç”¨é¢œè‰²</li>
          <li>ğŸ†• é›†æˆå¯¼å…¥å¯¼å‡ºï¼šä¸»é¢˜é…ç½®ä¸å£çº¸ä¸€èµ·å¯¼å…¥å¯¼å‡º</li>
        </ul>
      </div>

      <div class="test-section">
        <h3>ğŸ® æµ‹è¯•æ§åˆ¶</h3>
        <div class="test-controls">
          <button onclick="testPhoneWallpaperMode()">æµ‹è¯•æ‰‹æœºå£çº¸æ¨¡å¼</button>
          <button onclick="testPhoneThemeMode()">æµ‹è¯•æ‰‹æœºä¸»é¢˜æ¨¡å¼</button>
          <button onclick="testQQHomeMode()">æµ‹è¯•QQä¸»é¡µæ¨¡å¼</button>
          <button onclick="testQQChatMode()">æµ‹è¯•QQèŠå¤©æ¨¡å¼</button>
          <button onclick="testColorSelection()">æµ‹è¯•é¢œè‰²é€‰æ‹©</button>
          <button onclick="testCustomColors()">æµ‹è¯•è‡ªå®šä¹‰é¢œè‰²</button>
          <button onclick="testScrollPosition()">æµ‹è¯•æ»šåŠ¨ä½ç½®ä¿æŒ</button>
          <button onclick="testIconColorFix()">æµ‹è¯•å›¾æ ‡é¢œè‰²ä¿®å¤</button>
          <button onclick="testImportExport()">æµ‹è¯•å¯¼å…¥å¯¼å‡ºåŠŸèƒ½</button>
          <button onclick="runAllTests()">ğŸ”„ è¿è¡Œå…¨éƒ¨æµ‹è¯•</button>
        </div>
      </div>

      <div class="test-section">
        <h3>ğŸ“Š æµ‹è¯•ç»“æœ</h3>
        <div id="testResults" class="test-result">ç­‰å¾…æµ‹è¯•å¼€å§‹...</div>
      </div>

      <div class="test-section">
        <h3>ğŸ“± ç¾åŒ–åº”ç”¨æ¼”ç¤º</h3>
        <div class="demo-area" id="demoArea">
          <!-- ç¾åŒ–åº”ç”¨ç•Œé¢å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>
      </div>
    </div>

    <!-- åŠ è½½å¿…è¦çš„æ–‡ä»¶ -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="styles/phone-shell.css" />
    <link rel="stylesheet" href="styles/phone-interface.css" />
    <link rel="stylesheet" href="styles/wallpaper-app.css" />
    <script src="apps/phone-shell.js"></script>
    <script src="apps/phone-interface.js"></script>
    <script src="apps/wallpaper-app.js"></script>

    <script>
      let testResults = [];

      function log(message, type = 'info') {
        const timestamp = new Date().toLocaleTimeString();
        const logEntry = `[${timestamp}] ${message}`;
        testResults.push({ message: logEntry, type });
        updateTestResults();
        console.log(message);
      }

      function updateTestResults() {
        const resultsDiv = document.getElementById('testResults');
        resultsDiv.innerHTML = testResults
          .map(
            result =>
              `<div style="color: ${result.type === 'error' ? 'red' : result.type === 'success' ? 'green' : 'black'}">${
                result.message
              }</div>`,
          )
          .join('');
        resultsDiv.scrollTop = resultsDiv.scrollHeight;
      }

      function clearResults() {
        testResults = [];
        updateTestResults();
      }

      // æµ‹è¯•æ‰‹æœºå£çº¸æ¨¡å¼
      function testPhoneWallpaperMode() {
        log('ğŸ”„ æµ‹è¯•æ‰‹æœºå£çº¸æ¨¡å¼...', 'info');

        if (window.WallpaperApp) {
          window.WallpaperApp.setEditType('phone');
          window.WallpaperApp.switchMode('wallpaper');
          window.WallpaperApp.show();

          setTimeout(() => {
            const modeSwitcher = $('.wallpaper-mode-switcher');
            const wallpaperContent = $('.wallpaper-preview-section');

            if (modeSwitcher.length > 0 && wallpaperContent.length > 0) {
              log('âœ… æ‰‹æœºå£çº¸æ¨¡å¼ï¼šæ¨¡å¼åˆ‡æ¢æŒ‰é’®å’Œå£çº¸å†…å®¹æ­£ç¡®æ˜¾ç¤º', 'success');
            } else {
              log('âŒ æ‰‹æœºå£çº¸æ¨¡å¼ï¼šç•Œé¢å…ƒç´ ç¼ºå¤±', 'error');
            }
          }, 500);
        } else {
          log('âŒ WallpaperAppæœªåŠ è½½', 'error');
        }
      }

      // æµ‹è¯•æ‰‹æœºä¸»é¢˜æ¨¡å¼
      function testPhoneThemeMode() {
        log('ğŸ”„ æµ‹è¯•æ‰‹æœºä¸»é¢˜æ¨¡å¼...', 'info');

        if (window.WallpaperApp) {
          window.WallpaperApp.setEditType('phone');
          window.WallpaperApp.switchMode('theme');
          window.WallpaperApp.show();

          setTimeout(() => {
            const borderColorSection = $('.border-color-section');
            const iconColorSection = $('.icon-color-section');
            const customColorInputs = $('input[type="color"]');
            const oldThemeButtons = $('.theme-option-btn');

            if (
              borderColorSection.length > 0 &&
              iconColorSection.length > 0 &&
              customColorInputs.length >= 2 &&
              oldThemeButtons.length === 0
            ) {
              log('âœ… æ‰‹æœºä¸»é¢˜æ¨¡å¼ï¼šæ–°é¢œè‰²é€‰æ‹©ç•Œé¢æ­£ç¡®æ˜¾ç¤ºï¼Œæ—§ä¸»é¢˜æŒ‰é’®å·²åˆ é™¤', 'success');
            } else {
              log('âŒ æ‰‹æœºä¸»é¢˜æ¨¡å¼ï¼šç•Œé¢æ›´æ–°ä¸å®Œæ•´', 'error');
            }
          }, 500);
        } else {
          log('âŒ WallpaperAppæœªåŠ è½½', 'error');
        }
      }

      // æµ‹è¯•QQä¸»é¡µæ¨¡å¼
      function testQQHomeMode() {
        log('ğŸ”„ æµ‹è¯•QQä¸»é¡µæ¨¡å¼...', 'info');

        if (window.WallpaperApp) {
          window.WallpaperApp.setEditType('qq-home');
          window.WallpaperApp.show();

          setTimeout(() => {
            const modeSwitcher = $('.wallpaper-mode-switcher');
            const wallpaperContent = $('.wallpaper-preview-section');

            if (modeSwitcher.length === 0 && wallpaperContent.length > 0) {
              log('âœ… QQä¸»é¡µæ¨¡å¼ï¼šæ¨¡å¼åˆ‡æ¢æŒ‰é’®å·²éšè—ï¼Œå£çº¸åŠŸèƒ½ä¿ç•™', 'success');
            } else {
              log('âŒ QQä¸»é¡µæ¨¡å¼ï¼šæ¨¡å¼åˆ‡æ¢æŒ‰é’®ä»ç„¶æ˜¾ç¤ºæˆ–å£çº¸åŠŸèƒ½ç¼ºå¤±', 'error');
            }
          }, 500);
        } else {
          log('âŒ WallpaperAppæœªåŠ è½½', 'error');
        }
      }

      // æµ‹è¯•QQèŠå¤©æ¨¡å¼
      function testQQChatMode() {
        log('ğŸ”„ æµ‹è¯•QQèŠå¤©æ¨¡å¼...', 'info');

        if (window.WallpaperApp) {
          window.WallpaperApp.setEditType('qq-chat');
          window.WallpaperApp.show();

          setTimeout(() => {
            const modeSwitcher = $('.wallpaper-mode-switcher');
            const wallpaperContent = $('.wallpaper-preview-section');

            if (modeSwitcher.length === 0 && wallpaperContent.length > 0) {
              log('âœ… QQèŠå¤©æ¨¡å¼ï¼šæ¨¡å¼åˆ‡æ¢æŒ‰é’®å·²éšè—ï¼Œå£çº¸åŠŸèƒ½ä¿ç•™', 'success');
            } else {
              log('âŒ QQèŠå¤©æ¨¡å¼ï¼šæ¨¡å¼åˆ‡æ¢æŒ‰é’®ä»ç„¶æ˜¾ç¤ºæˆ–å£çº¸åŠŸèƒ½ç¼ºå¤±', 'error');
            }
          }, 500);
        } else {
          log('âŒ WallpaperAppæœªåŠ è½½', 'error');
        }
      }

      // æµ‹è¯•é¢œè‰²é€‰æ‹©åŠŸèƒ½
      function testColorSelection() {
        log('ğŸ”„ æµ‹è¯•é¢œè‰²é€‰æ‹©åŠŸèƒ½...', 'info');

        if (window.WallpaperApp) {
          window.WallpaperApp.setEditType('phone');
          window.WallpaperApp.switchMode('theme');
          window.WallpaperApp.show();

          setTimeout(() => {
            const colorOptions = $('.color-option');
            const borderColors = $('.border-color-section .color-option');
            const iconColors = $('.icon-color-section .color-option');

            if (colorOptions.length >= 16 && borderColors.length >= 8 && iconColors.length >= 8) {
              log('âœ… é¢œè‰²é€‰æ‹©åŠŸèƒ½ï¼šé¢„è®¾é¢œè‰²é€‰é¡¹æ­£ç¡®æ˜¾ç¤º', 'success');

              // æµ‹è¯•ç‚¹å‡»é¢œè‰²é€‰é¡¹
              if (borderColors.length > 0) {
                $(borderColors[0]).trigger('click');
                log('âœ… é¢œè‰²é€‰æ‹©åŠŸèƒ½ï¼šè¾¹æ¡†é¢œè‰²ç‚¹å‡»æµ‹è¯•å®Œæˆ', 'success');
              }
            } else {
              log('âŒ é¢œè‰²é€‰æ‹©åŠŸèƒ½ï¼šé¢œè‰²é€‰é¡¹æ•°é‡ä¸æ­£ç¡®', 'error');
            }
          }, 500);
        } else {
          log('âŒ WallpaperAppæœªåŠ è½½', 'error');
        }
      }

      // æµ‹è¯•è‡ªå®šä¹‰é¢œè‰²åŠŸèƒ½
      function testCustomColors() {
        log('ğŸ”„ æµ‹è¯•è‡ªå®šä¹‰é¢œè‰²åŠŸèƒ½...', 'info');

        if (window.WallpaperApp) {
          window.WallpaperApp.setEditType('phone');
          window.WallpaperApp.switchMode('theme');
          window.WallpaperApp.show();

          setTimeout(() => {
            const customColorInputs = $('input[type="color"]');
            const customColorButtons = $('.apply-custom-color-btn');

            if (customColorInputs.length >= 2 && customColorButtons.length >= 2) {
              log('âœ… è‡ªå®šä¹‰é¢œè‰²åŠŸèƒ½ï¼šé¢œè‰²è¾“å…¥å™¨å’Œåº”ç”¨æŒ‰é’®æ­£ç¡®æ˜¾ç¤º', 'success');

              // æµ‹è¯•è‡ªå®šä¹‰é¢œè‰²è®¾ç½®
              const borderColorInput = $('#customBorderColor');
              const borderColorButton = $('.apply-custom-color-btn[data-type="border"]');

              if (borderColorInput.length > 0 && borderColorButton.length > 0) {
                borderColorInput.val('#ff0000');
                borderColorButton.trigger('click');
                log('âœ… è‡ªå®šä¹‰é¢œè‰²åŠŸèƒ½ï¼šè¾¹æ¡†é¢œè‰²è‡ªå®šä¹‰æµ‹è¯•å®Œæˆ', 'success');
              }
            } else {
              log('âŒ è‡ªå®šä¹‰é¢œè‰²åŠŸèƒ½ï¼šç•Œé¢å…ƒç´ ç¼ºå¤±', 'error');
            }
          }, 500);
        } else {
          log('âŒ WallpaperAppæœªåŠ è½½', 'error');
        }
      }

      // æµ‹è¯•æ»šåŠ¨ä½ç½®ä¿æŒåŠŸèƒ½
      function testScrollPosition() {
        log('ğŸ”„ æµ‹è¯•æ»šåŠ¨ä½ç½®ä¿æŒåŠŸèƒ½...', 'info');

        if (window.WallpaperApp) {
          window.WallpaperApp.setEditType('phone');
          window.WallpaperApp.switchMode('theme');
          window.WallpaperApp.show();

          setTimeout(() => {
            const $appBody = $('.wallpaper-app-body');
            if ($appBody.length > 0) {
              // æ»šåŠ¨åˆ°ä¸­é—´ä½ç½®
              const scrollTarget = 200;
              $appBody.scrollTop(scrollTarget);

              setTimeout(() => {
                const beforeScroll = $appBody.scrollTop();
                log(`ğŸ“ æ»šåŠ¨å‰ä½ç½®: ${beforeScroll}px`, 'info');

                // ç‚¹å‡»ä¸€ä¸ªé¢œè‰²é€‰é¡¹
                const colorOption = $('.color-option').first();
                if (colorOption.length > 0) {
                  colorOption.trigger('click');

                  setTimeout(() => {
                    const afterScroll = $appBody.scrollTop();
                    log(`ğŸ“ æ»šåŠ¨åä½ç½®: ${afterScroll}px`, 'info');

                    if (Math.abs(afterScroll - beforeScroll) < 50) {
                      log('âœ… æ»šåŠ¨ä½ç½®ä¿æŒï¼šä½ç½®ä¿æŒæ­£å¸¸', 'success');
                    } else {
                      log('âŒ æ»šåŠ¨ä½ç½®ä¿æŒï¼šä½ç½®å‘ç”Ÿè·³è½¬', 'error');
                    }
                  }, 300);
                }
              }, 100);
            } else {
              log('âŒ æ»šåŠ¨ä½ç½®ä¿æŒï¼šæ‰¾ä¸åˆ°åº”ç”¨ä¸»ä½“å…ƒç´ ', 'error');
            }
          }, 500);
        } else {
          log('âŒ WallpaperAppæœªåŠ è½½', 'error');
        }
      }

      // æµ‹è¯•å›¾æ ‡é¢œè‰²ä¿®å¤åŠŸèƒ½
      function testIconColorFix() {
        log('ğŸ”„ æµ‹è¯•å›¾æ ‡é¢œè‰²ä¿®å¤åŠŸèƒ½...', 'info');

        if (window.WallpaperApp && window.PhoneShell) {
          window.WallpaperApp.setEditType('phone');
          window.WallpaperApp.switchMode('theme');
          window.WallpaperApp.show();

          setTimeout(() => {
            // æµ‹è¯•è®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰é¢œè‰²
            const testColor = '#ff6b6b';
            window.WallpaperApp.applyColorConfig('icon', testColor);

            setTimeout(() => {
              // æ£€æŸ¥CSSå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®
              const $phone = $('#phone_interface');
              if ($phone.length > 0) {
                const computedStyle = window.getComputedStyle($phone[0]);
                const iconColor = computedStyle.getPropertyValue('--status-bar-icon-color').trim();
                const iconFilter = computedStyle.getPropertyValue('--status-bar-icon-filter').trim();

                log(`ğŸ¨ å›¾æ ‡é¢œè‰²è®¾ç½®: ${iconColor}`, 'info');
                log(`ğŸ”§ å›¾æ ‡æ»¤é•œè®¾ç½®: ${iconFilter}`, 'info');

                if (iconColor === testColor && iconFilter && iconFilter !== 'brightness(0)') {
                  log('âœ… å›¾æ ‡é¢œè‰²ä¿®å¤ï¼šé¢œè‰²å’Œæ»¤é•œæ­£ç¡®åº”ç”¨', 'success');
                } else {
                  log('âŒ å›¾æ ‡é¢œè‰²ä¿®å¤ï¼šé¢œè‰²æˆ–æ»¤é•œè®¾ç½®æœ‰é—®é¢˜', 'error');
                }
              } else {
                log('âŒ å›¾æ ‡é¢œè‰²ä¿®å¤ï¼šæ‰¾ä¸åˆ°æ‰‹æœºç•Œé¢å…ƒç´ ', 'error');
              }
            }, 200);
          }, 500);
        } else {
          log('âŒ WallpaperAppæˆ–PhoneShellæœªåŠ è½½', 'error');
        }
      }

      // æµ‹è¯•å¯¼å…¥å¯¼å‡ºåŠŸèƒ½
      function testImportExport() {
        log('ğŸ”„ æµ‹è¯•å¯¼å…¥å¯¼å‡ºåŠŸèƒ½...', 'info');

        if (window.WallpaperApp) {
          window.WallpaperApp.setEditType('phone');
          window.WallpaperApp.switchMode('wallpaper');
          window.WallpaperApp.show();

          setTimeout(() => {
            // æ£€æŸ¥å¯¼å‡ºæŒ‰é’®æ˜¯å¦å­˜åœ¨
            const exportBtn = $('.wallpaper-export-btn');
            const importBtn = $('.wallpaper-import-btn');

            if (exportBtn.length > 0 && importBtn.length > 0) {
              log('âœ… å¯¼å…¥å¯¼å‡ºåŠŸèƒ½ï¼šæŒ‰é’®æ­£ç¡®æ˜¾ç¤º', 'success');

              // æ¨¡æ‹Ÿå¯¼å‡ºæµ‹è¯•
              try {
                const testData = {
                  currentWallpaper: 'test.jpg',
                  history: ['test1.jpg', 'test2.jpg'],
                  qqBackgrounds: { home: '', homeBlur: 0, chats: {} },
                  themeConfig: { borderColor: '#ff0000', iconColor: '#00ff00' },
                };

                // æ£€æŸ¥å¯¼å‡ºæ•°æ®æ˜¯å¦åŒ…å«ä¸»é¢˜é…ç½®
                if (testData.themeConfig) {
                  log('âœ… å¯¼å…¥å¯¼å‡ºåŠŸèƒ½ï¼šä¸»é¢˜é…ç½®å·²é›†æˆåˆ°å¯¼å‡ºæ•°æ®', 'success');
                } else {
                  log('âŒ å¯¼å…¥å¯¼å‡ºåŠŸèƒ½ï¼šä¸»é¢˜é…ç½®æœªé›†æˆ', 'error');
                }
              } catch (error) {
                log('âŒ å¯¼å…¥å¯¼å‡ºåŠŸèƒ½ï¼šå¯¼å‡ºæµ‹è¯•å¤±è´¥', 'error');
              }
            } else {
              log('âŒ å¯¼å…¥å¯¼å‡ºåŠŸèƒ½ï¼šæŒ‰é’®ç¼ºå¤±', 'error');
            }
          }, 500);
        } else {
          log('âŒ WallpaperAppæœªåŠ è½½', 'error');
        }
      }

      // è¿è¡Œå…¨éƒ¨æµ‹è¯•
      function runAllTests() {
        clearResults();
        log('ğŸš€ å¼€å§‹è¿è¡Œå…¨éƒ¨æµ‹è¯•...', 'info');

        setTimeout(() => testPhoneWallpaperMode(), 100);
        setTimeout(() => testPhoneThemeMode(), 1000);
        setTimeout(() => testQQHomeMode(), 2000);
        setTimeout(() => testQQChatMode(), 3000);
        setTimeout(() => testColorSelection(), 4000);
        setTimeout(() => testCustomColors(), 5000);
        setTimeout(() => testScrollPosition(), 6000);
        setTimeout(() => testIconColorFix(), 7000);
        setTimeout(() => testImportExport(), 8000);

        setTimeout(() => {
          log('ğŸ‰ å…¨éƒ¨æµ‹è¯•å®Œæˆï¼', 'success');
        }, 9000);
      }

      // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
      $(document).ready(function () {
        log('é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–...', 'info');

        // æ£€æŸ¥å¿…è¦çš„ç»„ä»¶æ˜¯å¦åŠ è½½
        if (typeof window.PhoneShell === 'undefined') {
          log('âŒ PhoneShellæœªåŠ è½½', 'error');
          return;
        }

        if (typeof window.PhoneInterface === 'undefined') {
          log('âŒ PhoneInterfaceæœªåŠ è½½', 'error');
          return;
        }

        if (typeof window.WallpaperApp === 'undefined') {
          log('âŒ WallpaperAppæœªåŠ è½½', 'error');
          return;
        }

        // åˆå§‹åŒ–ç»„ä»¶
        window.PhoneShell.init();
        window.PhoneInterface.initButtonOnly();
        window.WallpaperApp.init();

        log('âœ… æ‰€æœ‰ç»„ä»¶åˆå§‹åŒ–å®Œæˆ', 'success');

        // åˆ›å»ºæµ‹è¯•æ‰‹æœºç•Œé¢
        const testContent = `
                <div style="padding: 20px; text-align: center; color: #666;">
                    <h3>ç¾åŒ–åº”ç”¨æµ‹è¯•ç•Œé¢</h3>
                    <p>ç”¨äºéªŒè¯æ‰€æœ‰åŠŸèƒ½</p>
                </div>
            `;

        const phoneHTML = window.PhoneShell.createShellHTML(testContent, 'test_phone');
        $('#demoArea').html(phoneHTML);

        // æ˜¾ç¤ºæ‰‹æœºç•Œé¢
        window.PhoneShell.show('test_phone');

        log('ğŸ“± æµ‹è¯•æ‰‹æœºç•Œé¢å·²åˆ›å»º', 'success');
        log('âœ… æµ‹è¯•ç¯å¢ƒåˆå§‹åŒ–å®Œæˆï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•', 'success');
      });
    </script>
  </body>
</html>
