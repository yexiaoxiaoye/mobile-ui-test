<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ç»Ÿä¸€æŒ‰é’®æ ·å¼æµ‹è¯•</title>

    <!-- å¼•å…¥ç»Ÿä¸€æŒ‰é’®æ ·å¼ -->
    <link rel="stylesheet" href="image/unified-buttons.css" />

    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        margin: 0;
        padding: 20px;
        background: #f5f5f5;
      }

      .test-container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .test-section {
        margin-bottom: 30px;
        padding: 20px;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
      }

      .test-section h3 {
        margin-top: 0;
        color: #333;
        border-bottom: 2px solid #007aff;
        padding-bottom: 10px;
      }

      .button-row {
        display: flex;
        align-items: center;
        gap: 15px;
        margin: 15px 0;
        padding: 10px;
        background: #f8f9fa;
        border-radius: 6px;
      }

      .button-label {
        min-width: 150px;
        font-weight: 500;
        color: #666;
      }

      .status-indicator {
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: bold;
      }

      .status-success {
        background: #d4edda;
        color: #155724;
      }

      .status-error {
        background: #f8d7da;
        color: #721c24;
      }

      .log-area {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 6px;
        padding: 15px;
        font-family: 'Courier New', monospace;
        font-size: 12px;
        max-height: 200px;
        overflow-y: auto;
        margin-top: 20px;
      }

      .test-controls {
        text-align: center;
        margin: 20px 0;
      }

      .test-btn {
        background: #007aff;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 6px;
        cursor: pointer;
        margin: 0 10px;
        transition: background 0.2s;
      }

      .test-btn:hover {
        background: #0056b3;
      }

      .mock-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 15px;
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 6px;
        margin: 10px 0;
      }
    </style>
  </head>
  <body>
    <div class="test-container">
      <h1>ğŸ”§ ç»Ÿä¸€æŒ‰é’®æ ·å¼æµ‹è¯•</h1>
      <p>æµ‹è¯•QQåº”ç”¨ä¸­æ‰€æœ‰å°æˆ¿å­æŒ‰é’®å’Œè¿”å›æŒ‰é’®çš„ç»Ÿä¸€æ ·å¼æ•ˆæœ</p>

      <div class="test-controls">
        <button class="test-btn" onclick="testAllButtons()">ğŸ§ª æµ‹è¯•æ‰€æœ‰æŒ‰é’®</button>
        <button class="test-btn" onclick="refreshButtons()">ğŸ”„ åˆ·æ–°æŒ‰é’®æ ·å¼</button>
        <button class="test-btn" onclick="clearLog()">ğŸ—‘ï¸ æ¸…ç©ºæ—¥å¿—</button>
      </div>

      <!-- å°æˆ¿å­æŒ‰é’®æµ‹è¯• -->
      <div class="test-section">
        <h3>ğŸ  å°æˆ¿å­æŒ‰é’®æµ‹è¯•</h3>

        <div class="button-row">
          <span class="button-label">QQä¸»é¡µå°æˆ¿å­:</span>
          <button class="home-btn" id="home_btn_main" title="è¿”å›æ‰‹æœºé¦–é¡µ">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path
                d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z"
                stroke="currentColor"
                stroke-width="2"
              />
              <path d="M9 22V12H15V22" stroke="currentColor" stroke-width="2" />
            </svg>
          </button>
          <span class="status-indicator" id="status-home-main">å¾…æµ‹è¯•</span>
        </div>

        <div class="button-row">
          <span class="button-label">èŠå¤©é¡µé¢å°æˆ¿å­:</span>
          <button class="home-btn chat-home-btn" title="è¿”å›æ‰‹æœºé¦–é¡µ">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path
                d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z"
                stroke="currentColor"
                stroke-width="2"
              />
              <path d="M9 22V12H15V22" stroke="currentColor" stroke-width="2" />
            </svg>
          </button>
          <span class="status-indicator" id="status-home-chat">å¾…æµ‹è¯•</span>
        </div>

        <div class="button-row">
          <span class="button-label">å¥½å‹ç®¡ç†å°æˆ¿å­:</span>
          <button class="home-button friend-manager-home-btn" title="è¿”å›æ‰‹æœºé¦–é¡µ">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path
                d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z"
                stroke="currentColor"
                stroke-width="2"
              />
              <path d="M9 22V12H15V22" stroke="currentColor" stroke-width="2" />
            </svg>
          </button>
          <span class="status-indicator" id="status-home-friend">å¾…æµ‹è¯•</span>
        </div>

        <div class="button-row">
          <span class="button-label">ç¾åŒ–åº”ç”¨å°æˆ¿å­:</span>
          <button class="wallpaper-home-btn" title="è¿”å›æ‰‹æœºé¦–é¡µ">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path
                d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z"
                stroke="currentColor"
                stroke-width="2"
              />
              <path d="M9 22V12H15V22" stroke="currentColor" stroke-width="2" />
            </svg>
          </button>
          <span class="status-indicator" id="status-home-wallpaper">å¾…æµ‹è¯•</span>
        </div>
      </div>

      <!-- è¿”å›æŒ‰é’®æµ‹è¯• -->
      <div class="test-section">
        <h3>ğŸ”™ è¿”å›æŒ‰é’®æµ‹è¯•</h3>

        <div class="button-row">
          <span class="button-label">èŠå¤©é¡µé¢è¿”å›:</span>
          <button class="back-to-main-list-btn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" />
            </svg>
          </button>
          <span class="status-indicator" id="status-back-chat">å¾…æµ‹è¯•</span>
        </div>

        <div class="button-row">
          <span class="button-label">å¥½å‹ç®¡ç†è¿”å›:</span>
          <button class="back-button" id="friend_manager_back_btn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" />
            </svg>
          </button>
          <span class="status-indicator" id="status-back-friend">å¾…æµ‹è¯•</span>
        </div>

        <div class="button-row">
          <span class="button-label">ç¾åŒ–åº”ç”¨è¿”å›:</span>
          <button class="wallpaper-back-btn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" />
            </svg>
          </button>
          <span class="status-indicator" id="status-back-wallpaper">å¾…æµ‹è¯•</span>
        </div>

        <div class="button-row">
          <span class="button-label">QQè”ç³»äººè¿”å›:</span>
          <button class="back">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" />
            </svg>
          </button>
          <span class="status-indicator" id="status-back-contact">å¾…æµ‹è¯•</span>
        </div>
      </div>

      <!-- æ¨¡æ‹Ÿç•Œé¢æµ‹è¯• -->
      <div class="test-section">
        <h3>ğŸ“± æ¨¡æ‹Ÿç•Œé¢æµ‹è¯•</h3>

        <div class="mock-header">
          <button class="back-button">â†</button>
          <span>å¥½å‹ä¸ç¾¤ç»„ç®¡ç†</span>
          <div>
            <button class="more-button">â‹¯</button>
            <button class="home-button friend-manager-home-btn">ğŸ </button>
          </div>
        </div>

        <div class="mock-header">
          <button class="back-to-main-list-btn">â†</button>
          <span>èŠå¤©è¯¦æƒ…</span>
          <div>
            <button class="chat-wallpaper-btn">ğŸ¨</button>
            <button class="home-btn chat-home-btn">ğŸ ï¸</button>
          </div>
        </div>
      </div>

      <div class="log-area" id="testLog">
        <div>ğŸ“‹ æµ‹è¯•æ—¥å¿—å°†åœ¨è¿™é‡Œæ˜¾ç¤º...</div>
      </div>
    </div>

    <!-- å¼•å…¥jQuery -->
    <script src="jquery-3.js"></script>
    <!-- å¼•å…¥ç»Ÿä¸€æŒ‰é’®ç®¡ç†å™¨ -->
    <script src="image/unified-buttons.js"></script>

    <script>
      // æµ‹è¯•æ—¥å¿—å‡½æ•°
      function addLog(message, type = 'info') {
        const logArea = document.getElementById('testLog');
        const timestamp = new Date().toLocaleTimeString();
        const logEntry = document.createElement('div');
        logEntry.style.color = type === 'error' ? '#dc3545' : type === 'success' ? '#28a745' : '#333';
        logEntry.textContent = `[${timestamp}] ${message}`;
        logArea.appendChild(logEntry);
        logArea.scrollTop = logArea.scrollHeight;
      }

      function clearLog() {
        document.getElementById('testLog').innerHTML = '<div>ğŸ“‹ æµ‹è¯•æ—¥å¿—å·²æ¸…ç©º...</div>';
      }

      function updateStatus(elementId, status, message) {
        const element = document.getElementById(elementId);
        if (element) {
          element.textContent = message;
          element.className = `status-indicator status-${status}`;
        }
      }

      // æµ‹è¯•æŒ‰é’®æ˜¯å¦æœ‰SVGå›¾æ ‡
      function testButtonSVG(button, buttonName) {
        const svg = button.querySelector('svg');
        if (svg) {
          addLog(`âœ… ${buttonName} å·²æ­£ç¡®æ˜¾ç¤ºSVGå›¾æ ‡`, 'success');
          return true;
        } else {
          addLog(`âŒ ${buttonName} ç¼ºå°‘SVGå›¾æ ‡`, 'error');
          return false;
        }
      }

      // æµ‹è¯•æŒ‰é’®æ ·å¼
      function testButtonStyles(button, buttonName) {
        const computedStyle = window.getComputedStyle(button);
        const hasTransition = computedStyle.transition.includes('transform');
        const hasCorrectCursor = computedStyle.cursor === 'pointer';

        if (hasTransition && hasCorrectCursor) {
          addLog(`âœ… ${buttonName} æ ·å¼æ­£ç¡®`, 'success');
          return true;
        } else {
          addLog(`âš ï¸ ${buttonName} æ ·å¼å¯èƒ½ä¸å®Œæ•´`, 'error');
          return false;
        }
      }

      // æµ‹è¯•æ‰€æœ‰æŒ‰é’®
      function testAllButtons() {
        addLog('ğŸ§ª å¼€å§‹æµ‹è¯•æ‰€æœ‰æŒ‰é’®...', 'info');

        // æµ‹è¯•å°æˆ¿å­æŒ‰é’®
        const homeButtons = [
          { selector: '#home_btn_main', name: 'QQä¸»é¡µå°æˆ¿å­', statusId: 'status-home-main' },
          { selector: '.chat-home-btn', name: 'èŠå¤©é¡µé¢å°æˆ¿å­', statusId: 'status-home-chat' },
          { selector: '.friend-manager-home-btn', name: 'å¥½å‹ç®¡ç†å°æˆ¿å­', statusId: 'status-home-friend' },
          { selector: '.wallpaper-home-btn', name: 'ç¾åŒ–åº”ç”¨å°æˆ¿å­', statusId: 'status-home-wallpaper' },
        ];

        homeButtons.forEach(({ selector, name, statusId }) => {
          const button = document.querySelector(selector);
          if (button) {
            const hasSVG = testButtonSVG(button, name);
            const hasStyles = testButtonStyles(button, name);
            updateStatus(
              statusId,
              hasSVG && hasStyles ? 'success' : 'error',
              hasSVG && hasStyles ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥',
            );
          } else {
            addLog(`âŒ æœªæ‰¾åˆ° ${name} æŒ‰é’®`, 'error');
            updateStatus(statusId, 'error', 'âŒ æœªæ‰¾åˆ°');
          }
        });

        // æµ‹è¯•è¿”å›æŒ‰é’®
        const backButtons = [
          { selector: '.back-to-main-list-btn', name: 'èŠå¤©é¡µé¢è¿”å›', statusId: 'status-back-chat' },
          { selector: '#friend_manager_back_btn', name: 'å¥½å‹ç®¡ç†è¿”å›', statusId: 'status-back-friend' },
          { selector: '.wallpaper-back-btn', name: 'ç¾åŒ–åº”ç”¨è¿”å›', statusId: 'status-back-wallpaper' },
          { selector: '.back', name: 'QQè”ç³»äººè¿”å›', statusId: 'status-back-contact' },
        ];

        backButtons.forEach(({ selector, name, statusId }) => {
          const button = document.querySelector(selector);
          if (button) {
            const hasSVG = testButtonSVG(button, name);
            const hasStyles = testButtonStyles(button, name);
            updateStatus(
              statusId,
              hasSVG && hasStyles ? 'success' : 'error',
              hasSVG && hasStyles ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥',
            );
          } else {
            addLog(`âŒ æœªæ‰¾åˆ° ${name} æŒ‰é’®`, 'error');
            updateStatus(statusId, 'error', 'âŒ æœªæ‰¾åˆ°');
          }
        });

        addLog('ğŸ‰ æŒ‰é’®æµ‹è¯•å®Œæˆï¼', 'success');
      }

      // åˆ·æ–°æŒ‰é’®æ ·å¼
      function refreshButtons() {
        if (window.UnifiedButtons) {
          window.UnifiedButtons.refresh();
          addLog('ğŸ”„ æŒ‰é’®æ ·å¼å·²åˆ·æ–°', 'success');
        } else {
          addLog('âŒ ç»Ÿä¸€æŒ‰é’®ç®¡ç†å™¨æœªåŠ è½½', 'error');
        }
      }

      // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
      $(document).ready(function () {
        addLog('ğŸ“± ç»Ÿä¸€æŒ‰é’®æµ‹è¯•é¡µé¢å·²åŠ è½½', 'info');

        // ç­‰å¾…ç»Ÿä¸€æŒ‰é’®ç®¡ç†å™¨åŠ è½½
        setTimeout(() => {
          if (window.UnifiedButtons) {
            addLog('âœ… ç»Ÿä¸€æŒ‰é’®ç®¡ç†å™¨å·²åŠ è½½', 'success');
            // è‡ªåŠ¨æµ‹è¯•ä¸€æ¬¡
            setTimeout(testAllButtons, 1000);
          } else {
            addLog('âŒ ç»Ÿä¸€æŒ‰é’®ç®¡ç†å™¨åŠ è½½å¤±è´¥', 'error');
          }
        }, 500);
      });
    </script>
  </body>
</html>
