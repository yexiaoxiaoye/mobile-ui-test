<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QQè°ƒè‰²ç›˜æŒ‰é’®æµ‹è¯•</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f0f0f0;
        }
        .test-container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 20px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 10px;
        }
        .test-section h3 {
            margin: 0 0 15px 0;
            color: #333;
        }
        .button-test {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 10px 0;
        }
        .wallpaper-btn,
        .chat-wallpaper-btn {
            background: none;
            color: black;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: transform 0.2s ease;
            flex-shrink: 0;
            user-select: none;
            padding: 0;
            position: relative;
            z-index: 10;
            border: 1px solid #ccc;
        }
        .wallpaper-btn:hover,
        .chat-wallpaper-btn:hover {
            transform: scale(1.1);
            background: #f0f0f0;
        }
        .wallpaper-btn:active,
        .chat-wallpaper-btn:active {
            transform: scale(0.9);
            background: #e0e0e0;
        }
        #qq_home_wallpaper_btn {
            padding: 8px 12px;
            font-size: 20px;
            background: none;
            border: 1px solid #ccc;
            color: black;
            cursor: pointer;
            border-radius: 5px;
        }
        .log-area {
            background: #f8f8f8;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            height: 200px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
        }
        .log-entry {
            margin: 2px 0;
            padding: 2px 5px;
            border-radius: 3px;
        }
        .log-entry.success {
            background: #d4edda;
            color: #155724;
        }
        .log-entry.error {
            background: #f8d7da;
            color: #721c24;
        }
        .log-entry.info {
            background: #d1ecf1;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ¨ QQè°ƒè‰²ç›˜æŒ‰é’®æµ‹è¯•</h1>
        
        <div class="test-section">
            <h3>1. QQä¸»é¡µè°ƒè‰²ç›˜æŒ‰é’®</h3>
            <div class="button-test">
                <button class="wallpaper-btn" id="qq_home_wallpaper_btn" title="è®¾ç½®QQä¸»é¡µèƒŒæ™¯">ğŸ¨</button>
                <span>QQä¸»é¡µèƒŒæ™¯è®¾ç½®æŒ‰é’®</span>
            </div>
        </div>

        <div class="test-section">
            <h3>2. èŠå¤©é¡µé¢è°ƒè‰²ç›˜æŒ‰é’®</h3>
            <div class="button-test">
                <button class="chat-wallpaper-btn" data-chat-id="123456789" title="è®¾ç½®èŠå¤©èƒŒæ™¯">ğŸ¨</button>
                <span>è”ç³»äººèŠå¤©èƒŒæ™¯è®¾ç½®æŒ‰é’® (ID: 123456789)</span>
            </div>
            <div class="button-test">
                <button class="chat-wallpaper-btn" data-chat-id="987654321" title="è®¾ç½®èŠå¤©èƒŒæ™¯">ğŸ¨</button>
                <span>ç¾¤èŠèƒŒæ™¯è®¾ç½®æŒ‰é’® (ID: 987654321)</span>
            </div>
        </div>

        <div class="test-section">
            <h3>3. äº‹ä»¶æ—¥å¿—</h3>
            <div class="log-area" id="log-area">
                <div class="log-entry info">æµ‹è¯•é¡µé¢å·²åŠ è½½ï¼Œç­‰å¾…æŒ‰é’®ç‚¹å‡»...</div>
            </div>
        </div>

        <div class="test-section">
            <h3>4. åŠŸèƒ½æµ‹è¯•</h3>
            <button onclick="testWallpaperApp()" style="padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">æµ‹è¯•WallpaperApp</button>
            <button onclick="clearLog()" style="padding: 10px 20px; margin: 5px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer;">æ¸…ç©ºæ—¥å¿—</button>
        </div>
    </div>

    <!-- å¼•å…¥jQuery -->
    <script src="jquery-3.js"></script>
    
    <!-- æ¨¡æ‹ŸWallpaperApp -->
    <script>
        // æ¨¡æ‹ŸWallpaperAppå¯¹è±¡
        window.WallpaperApp = {
            openQQHomeEditor: function() {
                addLog('success', 'WallpaperApp.openQQHomeEditor() è¢«è°ƒç”¨');
                alert('QQä¸»é¡µèƒŒæ™¯ç¼–è¾‘å™¨å·²æ‰“å¼€ï¼');
            },
            openQQChatEditor: function(chatId) {
                addLog('success', `WallpaperApp.openQQChatEditor(${chatId}) è¢«è°ƒç”¨`);
                alert(`èŠå¤©èƒŒæ™¯ç¼–è¾‘å™¨å·²æ‰“å¼€ï¼èŠå¤©ID: ${chatId}`);
            }
        };

        // æ—¥å¿—å‡½æ•°
        function addLog(type, message) {
            const logArea = document.getElementById('log-area');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            logEntry.textContent = `[${timestamp}] ${message}`;
            logArea.appendChild(logEntry);
            logArea.scrollTop = logArea.scrollHeight;
        }

        function clearLog() {
            document.getElementById('log-area').innerHTML = '<div class="log-entry info">æ—¥å¿—å·²æ¸…ç©º</div>';
        }

        function testWallpaperApp() {
            if (window.WallpaperApp) {
                addLog('success', 'WallpaperApp å¯¹è±¡å­˜åœ¨');
                if (typeof window.WallpaperApp.openQQHomeEditor === 'function') {
                    addLog('success', 'openQQHomeEditor æ–¹æ³•å­˜åœ¨');
                } else {
                    addLog('error', 'openQQHomeEditor æ–¹æ³•ä¸å­˜åœ¨');
                }
                if (typeof window.WallpaperApp.openQQChatEditor === 'function') {
                    addLog('success', 'openQQChatEditor æ–¹æ³•å­˜åœ¨');
                } else {
                    addLog('error', 'openQQChatEditor æ–¹æ³•ä¸å­˜åœ¨');
                }
            } else {
                addLog('error', 'WallpaperApp å¯¹è±¡ä¸å­˜åœ¨');
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåç»‘å®šäº‹ä»¶
        $(document).ready(function() {
            addLog('info', 'jQuery å·²åŠ è½½');
            
            // QQä¸»é¡µèƒŒæ™¯è®¾ç½®æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            $(document).on('click', '#qq_home_wallpaper_btn', function (e) {
                e.stopPropagation();
                addLog('info', 'ç‚¹å‡»äº†QQä¸»é¡µèƒŒæ™¯è®¾ç½®æŒ‰é’®');
                if (window.WallpaperApp && typeof window.WallpaperApp.openQQHomeEditor === 'function') {
                    window.WallpaperApp.openQQHomeEditor();
                } else {
                    addLog('error', 'WallpaperAppæœªæ‰¾åˆ°æˆ–openQQHomeEditoræ–¹æ³•ä¸å­˜åœ¨');
                }
            });

            // èŠå¤©èƒŒæ™¯è®¾ç½®æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            $(document).on('click', '.chat-wallpaper-btn', function (e) {
                e.stopPropagation();
                const chatId = $(this).data('chat-id');
                addLog('info', `ç‚¹å‡»äº†èŠå¤©èƒŒæ™¯è®¾ç½®æŒ‰é’®ï¼ŒèŠå¤©ID: ${chatId}`);
                if (window.WallpaperApp && typeof window.WallpaperApp.openQQChatEditor === 'function') {
                    window.WallpaperApp.openQQChatEditor(chatId);
                } else {
                    addLog('error', 'WallpaperAppæœªæ‰¾åˆ°æˆ–openQQChatEditoræ–¹æ³•ä¸å­˜åœ¨');
                }
            });

            addLog('success', 'äº‹ä»¶ç»‘å®šå®Œæˆ');
            
            // è‡ªåŠ¨æµ‹è¯•WallpaperApp
            setTimeout(testWallpaperApp, 500);
        });
    </script>
</body>
</html>
