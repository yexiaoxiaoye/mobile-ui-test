# HQ-2 Extension - 聊天历史查看器和手机界面插件

一个为SillyTavern设计的多功能扩展，提供聊天历史查看、手机界面模拟和多种应用功能。

## 🚀 功能特性

### 📱 手机界面
- 仿真手机界面设计
- 应用图标网格布局
- 流畅的动画效果
- 响应式设计

### 💬 QQ消息应用
- 联系人列表管理
- 群聊消息查看
- 消息展开/收起功能
- 好感度显示
- 互动按钮（触摸、约饭、约会等）

### 🛒 淘宝购物应用
- 商品浏览
- 价格显示
- 购买记录
- 消费统计

### 📋 任务管理应用
- 可接受任务列表
- 已接受任务跟踪
- 已完成任务历史
- 任务状态管理

### 🎒 背包管理应用
- 物品展示
- 物品分类
- 数量统计
- 稀有度标识

### 🎲 抽卡应用
- 抽卡历史记录
- 统计数据显示
- 稀有度分析
- 抽卡结果展示

## 📁 项目结构

```
hq-2/
├── index.js                    # 主入口文件，负责加载所有模块和样式
├── README.md                   # 项目说明文档
├── manifest.json              # 扩展清单文件
├── apps/                      # 应用模块目录
│   ├── data-extractor.js      # 数据提取器，处理聊天记录解析
│   ├── qq-app.js             # QQ消息应用
│   ├── taobao-app.js         # 淘宝购物应用
│   ├── task-app.js           # 任务管理应用
│   ├── backpack-app.js       # 背包管理应用
│   ├── chouka-app.js         # 抽卡应用
│   └── phone-interface.js    # 手机界面控制器
└── styles/                   # 样式文件目录
    ├── main.css              # 主样式文件，包含通用样式
    ├── qq-app.css           # QQ应用专用样式
    ├── taobao-app.css       # 淘宝应用专用样式
    ├── task-app.css         # 任务应用专用样式
    ├── backpack-app.css     # 背包应用专用样式
    ├── chouka-app.css       # 抽卡应用专用样式
    └── phone-interface.css  # 手机界面专用样式
```

## 🛠 技术架构

### 模块化设计
- **独立应用模块**：每个应用都是独立的JavaScript文件
- **样式分离**：每个应用都有对应的CSS样式文件
- **统一管理**：主入口文件负责加载和初始化所有模块

### 样式系统
- **主样式文件**：提供通用的UI组件样式
- **应用样式**：每个应用的专用样式
- **响应式设计**：支持移动设备和桌面设备
- **主题一致性**：统一的颜色方案和设计语言

### 数据处理
- **正则表达式解析**：从聊天记录中提取结构化数据
- **异步处理**：支持大量数据的异步加载
- **错误处理**：完善的错误捕获和日志记录

## 📦 安装说明

1. 将整个 `hq-2` 文件夹放置到 SillyTavern 的扩展目录：
   ```
   SillyTavern/public/scripts/extensions/third-party/hq-2/
   ```

2. 重启 SillyTavern 或刷新页面

3. 扩展将自动加载所有模块和样式文件

## 🎯 使用方法

### 启动手机界面
1. 页面加载完成后，会在右下角显示手机按钮
2. 点击手机按钮打开手机界面
3. 点击应用图标启动对应的应用

### QQ消息查看
1. 在手机界面中点击QQ图标
2. 查看联系人和群聊列表
3. 点击联系人或群聊查看消息记录
4. 使用互动按钮进行操作

### 其他应用
- **淘宝**：查看购物记录和商品信息
- **任务**：管理和跟踪任务状态
- **背包**：查看物品和装备
- **抽卡**：查看抽卡历史和统计

## 🎨 样式定制

### 通用样式类
- `.hq-dialog`：对话框容器
- `.hq-btn`：按钮样式
- `.hq-list`：列表样式
- `.hq-grid`：网格布局
- `.hq-tabs`：标签页样式

### 颜色方案
- 主色调：`#007bff`（蓝色）
- 成功色：`#28a745`（绿色）
- 警告色：`#ffc107`（黄色）
- 危险色：`#dc3545`（红色）
- 背景色：`#2c2c2c`（深灰）

## 🔧 开发说明

### 添加新应用
1. 在 `apps/` 目录创建新的JavaScript文件
2. 在 `styles/` 目录创建对应的CSS文件
3. 在 `index.js` 中添加加载逻辑
4. 在 `phone-interface.js` 中添加应用图标

### 修改样式
1. 通用样式修改 `styles/main.css`
2. 应用专用样式修改对应的CSS文件
3. 支持CSS变量和媒体查询

## 🐛 故障排除

### 常见问题
1. **扩展未加载**：检查文件路径是否正确
2. **样式异常**：确认CSS文件是否正确加载
3. **功能异常**：查看浏览器控制台的错误信息
4. **数据为空**：确认聊天记录中包含相关数据

### 调试方法
1. 打开浏览器开发者工具
2. 查看控制台日志信息
3. 检查网络请求状态
4. 验证DOM元素是否正确生成

## 📄 许可证

本项目采用 MIT 许可证。

## 🤝 贡献

欢迎提交问题报告和功能请求！

---

**版本**: 2.0.0  
**更新日期**: 2024年  
**兼容性**: SillyTavern 1.10.0+
