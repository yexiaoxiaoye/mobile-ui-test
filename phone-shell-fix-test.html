<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ“± æ‰‹æœºå¤–å£³ä¿®å¤æµ‹è¯•</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <link rel="stylesheet" href="styles/phone-shell.css" />
    <link rel="stylesheet" href="styles/phone-interface.css" />
    <style>
      body {
        margin: 0;
        padding: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

      .test-controls {
        background: rgba(255, 255, 255, 0.9);
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      .test-btn {
        background: #007bff;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        margin: 5px;
        cursor: pointer;
        font-size: 14px;
      }

      .test-btn:hover {
        background: #0056b3;
      }

      .status-display {
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 15px;
        border-radius: 10px;
        margin-top: 20px;
        font-family: monospace;
        font-size: 12px;
        max-width: 600px;
        white-space: pre-wrap;
      }
    </style>
  </head>
  <body>
    <div class="test-controls">
      <h2>ğŸ“± æ‰‹æœºå¤–å£³èƒŒæ™¯ä¿®å¤æµ‹è¯•</h2>
      <p>æµ‹è¯•phone-shellç³»ç»Ÿä¸wallpaperåº”ç”¨çš„é›†æˆ</p>

      <button class="test-btn" onclick="createPhoneInterface()">åˆ›å»ºæ‰‹æœºç•Œé¢</button>
      <button class="test-btn" onclick="testWallpaperApplication()">æµ‹è¯•å£çº¸åº”ç”¨</button>
      <button class="test-btn" onclick="showPhoneInterface()">æ˜¾ç¤ºæ‰‹æœº</button>
      <button class="test-btn" onclick="hidePhoneInterface()">éšè—æ‰‹æœº</button>
      <button class="test-btn" onclick="checkElements()">æ£€æŸ¥å…ƒç´ </button>
      <button class="test-btn" onclick="clearAll()">æ¸…é™¤æ‰€æœ‰</button>
    </div>

    <div class="status-display" id="status">ç­‰å¾…æµ‹è¯•...</div>

    <script src="apps/phone-shell.js"></script>
    <script src="apps/wallpaper-app.js"></script>
    <script>
      let statusEl = document.getElementById('status');

      function log(message) {
        console.log(message);
        statusEl.textContent += new Date().toLocaleTimeString() + ': ' + message + '\n';
        statusEl.scrollTop = statusEl.scrollHeight;
      }

      function createPhoneInterface() {
        log('ğŸ—ï¸ å¼€å§‹åˆ›å»ºæ‰‹æœºç•Œé¢...');

        // åˆå§‹åŒ–phone-shellç³»ç»Ÿ
        if (typeof window.PhoneShell === 'undefined') {
          log('âŒ PhoneShellç³»ç»Ÿæœªæ‰¾åˆ°');
          return;
        }

        window.PhoneShell.init();
        log('âœ… PhoneShellç³»ç»Ÿå·²åˆå§‹åŒ–');

        // åˆ›å»ºæµ‹è¯•å†…å®¹
        const testContent = `
                <div class="phone-screen">
                    <div class="phone-background"></div>
                    <div class="phone-home-screen">
                        <div class="home-time">
                            <div class="home-time-main">21:09</div>
                            <div class="home-time-date">æµ‹è¯•æ¨¡å¼</div>
                        </div>
                        <div style="text-align: center; margin-top: 100px; color: white;">
                            <h3>ğŸ“± æ‰‹æœºç•Œé¢æµ‹è¯•</h3>
                            <p>èƒŒæ™¯åº”è¯¥æ­£ç¡®æ˜¾ç¤º</p>
                        </div>
                    </div>
                </div>
            `;

        // åˆ›å»ºæ‰‹æœºå¤–å£³
        const phoneHTML = window.PhoneShell.createShellHTML(testContent, 'test_phone');
        $('body').append(phoneHTML);

        log('âœ… æ‰‹æœºç•Œé¢HTMLå·²åˆ›å»º');
      }

      function testWallpaperApplication() {
        log('ğŸ¨ æµ‹è¯•å£çº¸åº”ç”¨...');

        if (typeof window.WallpaperApp === 'undefined') {
          log('âŒ WallpaperAppæœªæ‰¾åˆ°');
          return;
        }

        // åˆå§‹åŒ–å£çº¸åº”ç”¨
        window.WallpaperApp.init();
        log('âœ… WallpaperAppå·²åˆå§‹åŒ–');

        // æµ‹è¯•å£çº¸åº”ç”¨
        const testWallpaper = 'https://files.catbox.moe/wh4joi.jpg';
        window.WallpaperApp.updatePhoneBackground(testWallpaper);
        log('ğŸ–¼ï¸ æµ‹è¯•å£çº¸å·²åº”ç”¨: ' + testWallpaper);

        // æµ‹è¯•é»˜è®¤å£çº¸åº”ç”¨
        setTimeout(() => {
          log('ğŸ”„ æµ‹è¯•é»˜è®¤å£çº¸åº”ç”¨...');
          window.WallpaperApp.applyCurrentWallpaper();
          log('âœ… é»˜è®¤å£çº¸åº”ç”¨å®Œæˆ');
        }, 2000);
      }

      function showPhoneInterface() {
        log('ğŸ“± æ˜¾ç¤ºæ‰‹æœºç•Œé¢...');
        if (window.PhoneShell) {
          window.PhoneShell.show('test_phone');
          log('âœ… æ‰‹æœºç•Œé¢å·²æ˜¾ç¤º');
        } else {
          log('âŒ PhoneShellç³»ç»Ÿæœªæ‰¾åˆ°');
        }
      }

      function hidePhoneInterface() {
        log('ğŸ™ˆ éšè—æ‰‹æœºç•Œé¢...');
        if (window.PhoneShell) {
          window.PhoneShell.hide('test_phone');
          log('âœ… æ‰‹æœºç•Œé¢å·²éšè—');
        } else {
          log('âŒ PhoneShellç³»ç»Ÿæœªæ‰¾åˆ°');
        }
      }

      function checkElements() {
        log('ğŸ” æ£€æŸ¥é¡µé¢å…ƒç´ ...');

        const phoneShell = $('#test_phone');
        const phoneScreen = $('.phone-screen');
        const phoneBackground = $('.phone-background');

        log('ğŸ“Š å…ƒç´ æ£€æŸ¥ç»“æœ:');
        log('  - phone-shell: ' + (phoneShell.length > 0 ? 'âœ… å­˜åœ¨' : 'âŒ ä¸å­˜åœ¨'));
        log('  - phone-screen: ' + (phoneScreen.length > 0 ? 'âœ… å­˜åœ¨' : 'âŒ ä¸å­˜åœ¨'));
        log('  - phone-background: ' + (phoneBackground.length > 0 ? 'âœ… å­˜åœ¨' : 'âŒ ä¸å­˜åœ¨'));

        if (phoneScreen.length > 0) {
          const bgImage = phoneScreen.css('background-image');
          log('  - èƒŒæ™¯å›¾ç‰‡: ' + (bgImage && bgImage !== 'none' ? 'âœ… å·²è®¾ç½®' : 'âŒ æœªè®¾ç½®'));
          log('    èƒŒæ™¯å€¼: ' + bgImage);
        }
      }

      function clearAll() {
        log('ğŸ§¹ æ¸…é™¤æ‰€æœ‰å…ƒç´ ...');
        $('.phone-shell').remove();
        $('#test_phone').remove();
        log('âœ… æ‰€æœ‰å…ƒç´ å·²æ¸…é™¤');
      }

      // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
      $(document).ready(function () {
        log('ğŸš€ æµ‹è¯•é¡µé¢å·²åŠ è½½');
        log('ğŸ“‹ å¯ç”¨çš„æµ‹è¯•åŠŸèƒ½:');
        log('  1. åˆ›å»ºæ‰‹æœºç•Œé¢ - åˆ›å»ºåŸºæœ¬çš„æ‰‹æœºå¤–å£³ç»“æ„');
        log('  2. æµ‹è¯•å£çº¸åº”ç”¨ - åº”ç”¨æµ‹è¯•å£çº¸');
        log('  3. æ˜¾ç¤º/éšè—æ‰‹æœº - æ§åˆ¶æ‰‹æœºç•Œé¢æ˜¾ç¤º');
        log('  4. æ£€æŸ¥å…ƒç´  - éªŒè¯DOMç»“æ„å’Œæ ·å¼');
        log('  5. æ¸…é™¤æ‰€æœ‰ - é‡ç½®æµ‹è¯•ç¯å¢ƒ');
      });
    </script>
  </body>
</html>
