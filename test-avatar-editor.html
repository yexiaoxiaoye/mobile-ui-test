<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QQå¤´åƒç¼–è¾‘å™¨æµ‹è¯•</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="styles/qq-avatar-editor.css">
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #f0f0f0;
        }
        
        .test-container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .test-btn {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
        }
        
        .test-btn:hover {
            background: #0056b3;
        }
        
        .phone-simulator {
            width: 375px;
            height: 812px;
            background: #000;
            border-radius: 50px;
            padding: 10px;
            margin: 20px auto;
            position: relative;
        }
        
        .phone-screen {
            width: 100%;
            height: 100%;
            background: #fff;
            border-radius: 40px;
            overflow: hidden;
            position: relative;
        }
        
        .qq-app-container {
            width: 100%;
            height: 100%;
            position: relative;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>QQå¤´åƒç¼–è¾‘å™¨æµ‹è¯•</h1>
        <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æµ‹è¯•å¤´åƒç¼–è¾‘å™¨åŠŸèƒ½ï¼š</p>
        
        <button class="test-btn" id="test-user-editor">æµ‹è¯•ç”¨æˆ·å¤´åƒç¼–è¾‘å™¨</button>
        <button class="test-btn" id="test-contact-editor">æµ‹è¯•è”ç³»äººå¤´åƒç¼–è¾‘å™¨</button>
        <button class="test-btn" id="test-in-phone">åœ¨æ‰‹æœºç•Œé¢ä¸­æµ‹è¯•</button>
        
        <div id="console-output" style="margin-top: 20px; padding: 10px; background: #f8f9fa; border-radius: 6px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto;">
            <strong>æ§åˆ¶å°è¾“å‡ºï¼š</strong><br>
        </div>
    </div>
    
    <!-- æ‰‹æœºæ¨¡æ‹Ÿå™¨ -->
    <div class="phone-simulator" id="phone_interface" style="display: none;">
        <div class="phone-screen">
            <div class="qq-app-container"></div>
        </div>
    </div>

    <!-- æ¨¡æ‹ŸQQåº”ç”¨å¯¹è±¡ -->
    <script>
        // æ¨¡æ‹ŸQQåº”ç”¨å¯¹è±¡
        window.QQApp = {
            userData: {
                name: 'æµ‹è¯•ç”¨æˆ·',
                avatar: 'https://files.catbox.moe/9gz3v2.jpg'
            },
            
            getAvatarUrl: function(qqNumber) {
                return 'https://files.catbox.moe/9gz3v2.jpg';
            },
            
            setUserDataEnhanced: function(name, avatarConfig) {
                console.log('ä¿å­˜ç”¨æˆ·æ•°æ®:', name, avatarConfig);
                this.userData.name = name;
                if (typeof avatarConfig === 'string') {
                    this.userData.avatar = avatarConfig;
                } else if (avatarConfig && avatarConfig.url) {
                    this.userData.avatar = avatarConfig.url;
                }
                logToConsole('âœ… ç”¨æˆ·å¤´åƒå·²ä¿å­˜: ' + JSON.stringify(avatarConfig));
            },
            
            setAvatarUrlEnhanced: function(qqNumber, avatarConfig) {
                console.log('ä¿å­˜è”ç³»äººå¤´åƒ:', qqNumber, avatarConfig);
                logToConsole('âœ… è”ç³»äººå¤´åƒå·²ä¿å­˜: QQ' + qqNumber + ' - ' + JSON.stringify(avatarConfig));
            },
            
            showMainInterface: function() {
                console.log('æ˜¾ç¤ºQQä¸»ç•Œé¢');
                logToConsole('ğŸ  è¿”å›QQä¸»ç•Œé¢');
            }
        };
        
        // æ§åˆ¶å°è¾“å‡ºå‡½æ•°
        function logToConsole(message) {
            const output = document.getElementById('console-output');
            const time = new Date().toLocaleTimeString();
            output.innerHTML += `<br>[${time}] ${message}`;
            output.scrollTop = output.scrollHeight;
        }
        
        // é‡å†™console.logæ¥æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š
        const originalLog = console.log;
        console.log = function(...args) {
            originalLog.apply(console, args);
            logToConsole(args.join(' '));
        };
    </script>

    <!-- åŠ è½½å¤´åƒç¼–è¾‘å™¨ -->
    <script src="apps/qq-avatar-editor.js"></script>

    <script>
        $(document).ready(function() {
            logToConsole('é¡µé¢åŠ è½½å®Œæˆ');
            
            // æµ‹è¯•ç”¨æˆ·å¤´åƒç¼–è¾‘å™¨
            $('#test-user-editor').click(function() {
                logToConsole('ğŸ¨ æµ‹è¯•ç”¨æˆ·å¤´åƒç¼–è¾‘å™¨');
                if (window.QQAvatarEditor) {
                    window.QQAvatarEditor.showUserEditor();
                } else {
                    logToConsole('âŒ QQAvatarEditor ä¸å¯ç”¨');
                }
            });
            
            // æµ‹è¯•è”ç³»äººå¤´åƒç¼–è¾‘å™¨
            $('#test-contact-editor').click(function() {
                logToConsole('ğŸ¨ æµ‹è¯•è”ç³»äººå¤´åƒç¼–è¾‘å™¨');
                if (window.QQAvatarEditor) {
                    window.QQAvatarEditor.showContactEditor('123456789', 'æµ‹è¯•è”ç³»äºº');
                } else {
                    logToConsole('âŒ QQAvatarEditor ä¸å¯ç”¨');
                }
            });
            
            // åœ¨æ‰‹æœºç•Œé¢ä¸­æµ‹è¯•
            $('#test-in-phone').click(function() {
                logToConsole('ğŸ“± åœ¨æ‰‹æœºç•Œé¢ä¸­æµ‹è¯•');
                $('#phone_interface').show();
                $('#phone_interface').addClass('show-qq-app-content');
                
                setTimeout(() => {
                    if (window.QQAvatarEditor) {
                        window.QQAvatarEditor.showUserEditor();
                    }
                }, 500);
            });
            
            // æ£€æŸ¥QQAvatarEditoræ˜¯å¦åŠ è½½
            setTimeout(() => {
                if (window.QQAvatarEditor) {
                    logToConsole('âœ… QQAvatarEditor å·²åŠ è½½');
                } else {
                    logToConsole('âŒ QQAvatarEditor æœªåŠ è½½');
                }
            }, 1000);
        });
    </script>
</body>
</html>
