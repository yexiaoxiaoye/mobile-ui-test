<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å“åº”å¼ç¼©æ”¾æ¼”ç¤º</title>

    <!-- å¼•å…¥jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- å¼•å…¥æ ·å¼æ–‡ä»¶ -->
    <link rel="stylesheet" href="styles/main.css" />
    <link rel="stylesheet" href="styles/phone-interface.css" />

    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: 'Microsoft YaHei', Arial, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        overflow-x: hidden;
      }

      .demo-header {
        text-align: center;
        padding: 20px;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        color: white;
      }

      .demo-title {
        font-size: 28px;
        font-weight: bold;
        margin-bottom: 10px;
      }

      .demo-subtitle {
        font-size: 16px;
        opacity: 0.9;
      }

      .demo-controls {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        padding: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        min-width: 200px;
      }

      .control-group {
        margin-bottom: 15px;
      }

      .control-label {
        font-weight: bold;
        color: #333;
        margin-bottom: 5px;
        font-size: 12px;
        text-transform: uppercase;
      }

      .control-value {
        font-size: 16px;
        color: #007bff;
        font-weight: bold;
      }

      .demo-btn {
        width: 100%;
        padding: 8px 12px;
        border: none;
        border-radius: 6px;
        background: linear-gradient(135deg, #ff9ad5 0%, #a88beb 100%);
        color: white;
        cursor: pointer;
        font-weight: bold;
        margin-bottom: 8px;
        transition: transform 0.2s ease;
      }

      .demo-btn:hover {
        transform: translateY(-1px);
      }

      .size-simulator {
        position: fixed;
        bottom: 20px;
        left: 20px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 10px;
        padding: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        z-index: 1000;
      }

      .size-btn {
        padding: 5px 10px;
        margin: 2px;
        border: none;
        border-radius: 4px;
        background: #f8f9fa;
        cursor: pointer;
        font-size: 12px;
        transition: background 0.2s ease;
      }

      .size-btn:hover {
        background: #e9ecef;
      }

      .size-btn.active {
        background: #007bff;
        color: white;
      }

      .instructions {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 10px;
        padding: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        max-width: 300px;
        font-size: 14px;
        line-height: 1.5;
      }

      .instructions h4 {
        margin: 0 0 10px 0;
        color: #333;
      }

      .instructions ul {
        margin: 0;
        padding-left: 20px;
      }

      .instructions li {
        margin-bottom: 5px;
      }
    </style>
  </head>
  <body>
    <div class="demo-header">
      <div class="demo-title">ğŸ“± æ‰‹æœºæ’ä»¶å“åº”å¼ç¼©æ”¾æ¼”ç¤º</div>
      <div class="demo-subtitle">è‡ªåŠ¨é€‚é…ä¸åŒå±å¹•å°ºå¯¸ï¼Œæä¾›æœ€ä½³ç”¨æˆ·ä½“éªŒ</div>
    </div>

    <div class="demo-controls">
      <div class="control-group">
        <div class="control-label">å±å¹•å°ºå¯¸</div>
        <div class="control-value" id="screen_size">-</div>
      </div>

      <div class="control-group">
        <div class="control-label">ç¼©æ”¾æ¯”ä¾‹</div>
        <div class="control-value" id="scale_ratio">-</div>
      </div>

      <div class="control-group">
        <div class="control-label">è®¾å¤‡ç±»å‹</div>
        <div class="control-value" id="device_type">-</div>
      </div>

      <button class="demo-btn" onclick="togglePhone()">æ˜¾ç¤º/éšè—æ‰‹æœº</button>
      <button class="demo-btn" onclick="refreshScale()">åˆ·æ–°ç¼©æ”¾</button>
      <button class="demo-btn" onclick="resetView()">é‡ç½®è§†å›¾</button>
    </div>

    <div class="size-simulator">
      <div style="font-weight: bold; margin-bottom: 8px; font-size: 12px">å¿«é€Ÿåˆ‡æ¢å°ºå¯¸:</div>
      <button class="size-btn" onclick="simulateSize(320, 568)">iPhone 5</button>
      <button class="size-btn" onclick="simulateSize(375, 667)">iPhone 8</button>
      <button class="size-btn" onclick="simulateSize(414, 896)">iPhone 11</button>
      <button class="size-btn" onclick="simulateSize(768, 1024)">iPad</button>
      <button class="size-btn" onclick="simulateSize(1024, 768)">iPad æ¨ªå±</button>
      <button class="size-btn" onclick="simulateSize(1920, 1080)">æ¡Œé¢</button>
      <button class="size-btn active" onclick="resetSize()">åŸå§‹å°ºå¯¸</button>
    </div>

    <div class="instructions">
      <h4>ğŸ¯ æµ‹è¯•è¯´æ˜</h4>
      <ul>
        <li>ç‚¹å‡»"æ˜¾ç¤º/éšè—æ‰‹æœº"æŸ¥çœ‹æ•ˆæœ</li>
        <li>ä½¿ç”¨å¿«é€Ÿåˆ‡æ¢æŒ‰é’®æ¨¡æ‹Ÿä¸åŒè®¾å¤‡</li>
        <li>è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°è§‚å¯Ÿè‡ªé€‚åº”</li>
        <li>æŸ¥çœ‹å³ä¸Šè§’çš„å®æ—¶ç¼©æ”¾ä¿¡æ¯</li>
        <li>åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæµ‹è¯•æ¨ªç«–å±åˆ‡æ¢</li>
      </ul>
    </div>

    <!-- å¼•å…¥æ‰‹æœºç•Œé¢è„šæœ¬ -->
    <script src="apps/phone-interface.js"></script>

    <script>
      let originalSize = { width: window.innerWidth, height: window.innerHeight };

      // æ›´æ–°æ§åˆ¶é¢æ¿ä¿¡æ¯
      function updateControls() {
        const width = window.innerWidth;
        const height = window.innerHeight;

        $('#screen_size').text(`${width} Ã— ${height}`);

        // è·å–å½“å‰ç¼©æ”¾æ¯”ä¾‹
        const $phone = $('#phone_interface');
        if ($phone.length > 0) {
          const scale = $phone.css('--phone-scale') || '1';
          $('#scale_ratio').text(`${(parseFloat(scale) * 100).toFixed(0)}%`);
        } else {
          $('#scale_ratio').text('æœªåˆå§‹åŒ–');
        }

        // åˆ¤æ–­è®¾å¤‡ç±»å‹
        let deviceType = 'æ¡Œé¢';
        if (width <= 480) deviceType = 'æ‰‹æœº';
        else if (width <= 768) deviceType = 'å°å¹³æ¿';
        else if (width <= 1024) deviceType = 'å¹³æ¿';
        else if (width <= 1440) deviceType = 'ç¬”è®°æœ¬';
        else deviceType = 'å¤§å±å¹•';

        $('#device_type').text(deviceType);
      }

      // åˆ‡æ¢æ‰‹æœºæ˜¾ç¤º
      function togglePhone() {
        if (window.PhoneInterface) {
          const $phone = $('#phone_interface');
          if ($phone.hasClass('show')) {
            window.PhoneInterface.hide();
          } else {
            window.PhoneInterface.show();
          }
          setTimeout(updateControls, 100);
        }
      }

      // åˆ·æ–°ç¼©æ”¾
      function refreshScale() {
        if (window.PhoneInterface && window.PhoneInterface.updateResponsiveScale) {
          window.PhoneInterface.updateResponsiveScale();
          setTimeout(updateControls, 100);
        }
      }

      // é‡ç½®è§†å›¾
      function resetView() {
        resetSize();
        if (window.PhoneInterface) {
          window.PhoneInterface.hide();
        }
      }

      // æ¨¡æ‹Ÿä¸åŒå±å¹•å°ºå¯¸
      function simulateSize(width, height) {
        // æ›´æ–°æŒ‰é’®çŠ¶æ€
        $('.size-btn').removeClass('active');
        event.target.classList.add('active');

        // æ¨¡æ‹Ÿçª—å£å¤§å°å˜åŒ–
        Object.defineProperty(window, 'innerWidth', {
          writable: true,
          configurable: true,
          value: width,
        });
        Object.defineProperty(window, 'innerHeight', {
          writable: true,
          configurable: true,
          value: height,
        });

        // è§¦å‘resizeäº‹ä»¶
        $(window).trigger('resize');
        setTimeout(updateControls, 100);

        // æ˜¾ç¤ºæç¤ºä¿¡æ¯
        if (width >= 1024) {
          console.log(`ğŸ“± å¤§å±å¹•æ¨¡å¼: ${width}x${height} - æ‰‹æœºç•Œé¢ä¿æŒåŸå§‹å°ºå¯¸ï¼Œä¸ä¼šæ”¾å¤§`);
        }
      }

      // é‡ç½®åˆ°åŸå§‹å°ºå¯¸
      function resetSize() {
        $('.size-btn').removeClass('active');
        $('.size-btn:last').addClass('active');

        Object.defineProperty(window, 'innerWidth', {
          writable: true,
          configurable: true,
          value: originalSize.width,
        });
        Object.defineProperty(window, 'innerHeight', {
          writable: true,
          configurable: true,
          value: originalSize.height,
        });

        $(window).trigger('resize');
        setTimeout(updateControls, 100);
      }

      // é¡µé¢åˆå§‹åŒ–
      $(document).ready(function () {
        console.log('å“åº”å¼ç¼©æ”¾æ¼”ç¤ºé¡µé¢åŠ è½½å®Œæˆ');

        // ä¿å­˜åŸå§‹çª—å£å°ºå¯¸
        originalSize = { width: window.innerWidth, height: window.innerHeight };

        // åˆå§‹åŒ–æ‰‹æœºç•Œé¢
        if (window.PhoneInterface) {
          window.PhoneInterface.init();
          console.log('âœ… æ‰‹æœºç•Œé¢åˆå§‹åŒ–å®Œæˆ');
        } else {
          setTimeout(() => {
            if (window.PhoneInterface) {
              window.PhoneInterface.init();
              console.log('âœ… æ‰‹æœºç•Œé¢åˆå§‹åŒ–å®Œæˆï¼ˆå»¶è¿Ÿï¼‰');
            }
          }, 1000);
        }

        // æ›´æ–°æ§åˆ¶é¢æ¿
        updateControls();

        // ç›‘å¬çª—å£å˜åŒ–
        $(window).on('resize orientationchange', function () {
          setTimeout(updateControls, 100);
        });

        // å®šæœŸæ›´æ–°ä¿¡æ¯
        setInterval(updateControls, 2000);
      });
    </script>
  </body>
</html>
