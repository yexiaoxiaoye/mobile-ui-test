<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>响应式缩放演示</title>

    <!-- 引入jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- 引入样式文件 -->
    <link rel="stylesheet" href="styles/main.css" />
    <link rel="stylesheet" href="styles/phone-interface.css" />

    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: 'Microsoft YaHei', Arial, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        overflow-x: hidden;
      }

      .demo-header {
        text-align: center;
        padding: 20px;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        color: white;
      }

      .demo-title {
        font-size: 28px;
        font-weight: bold;
        margin-bottom: 10px;
      }

      .demo-subtitle {
        font-size: 16px;
        opacity: 0.9;
      }

      .demo-controls {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        padding: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        min-width: 200px;
      }

      .control-group {
        margin-bottom: 15px;
      }

      .control-label {
        font-weight: bold;
        color: #333;
        margin-bottom: 5px;
        font-size: 12px;
        text-transform: uppercase;
      }

      .control-value {
        font-size: 16px;
        color: #007bff;
        font-weight: bold;
      }

      .demo-btn {
        width: 100%;
        padding: 8px 12px;
        border: none;
        border-radius: 6px;
        background: linear-gradient(135deg, #ff9ad5 0%, #a88beb 100%);
        color: white;
        cursor: pointer;
        font-weight: bold;
        margin-bottom: 8px;
        transition: transform 0.2s ease;
      }

      .demo-btn:hover {
        transform: translateY(-1px);
      }

      .size-simulator {
        position: fixed;
        bottom: 20px;
        left: 20px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 10px;
        padding: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        z-index: 1000;
      }

      .size-btn {
        padding: 5px 10px;
        margin: 2px;
        border: none;
        border-radius: 4px;
        background: #f8f9fa;
        cursor: pointer;
        font-size: 12px;
        transition: background 0.2s ease;
      }

      .size-btn:hover {
        background: #e9ecef;
      }

      .size-btn.active {
        background: #007bff;
        color: white;
      }

      .instructions {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 10px;
        padding: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        max-width: 300px;
        font-size: 14px;
        line-height: 1.5;
      }

      .instructions h4 {
        margin: 0 0 10px 0;
        color: #333;
      }

      .instructions ul {
        margin: 0;
        padding-left: 20px;
      }

      .instructions li {
        margin-bottom: 5px;
      }
    </style>
  </head>
  <body>
    <div class="demo-header">
      <div class="demo-title">📱 手机插件响应式缩放演示</div>
      <div class="demo-subtitle">自动适配不同屏幕尺寸，提供最佳用户体验</div>
    </div>

    <div class="demo-controls">
      <div class="control-group">
        <div class="control-label">屏幕尺寸</div>
        <div class="control-value" id="screen_size">-</div>
      </div>

      <div class="control-group">
        <div class="control-label">缩放比例</div>
        <div class="control-value" id="scale_ratio">-</div>
      </div>

      <div class="control-group">
        <div class="control-label">设备类型</div>
        <div class="control-value" id="device_type">-</div>
      </div>

      <button class="demo-btn" onclick="togglePhone()">显示/隐藏手机</button>
      <button class="demo-btn" onclick="refreshScale()">刷新缩放</button>
      <button class="demo-btn" onclick="resetView()">重置视图</button>
    </div>

    <div class="size-simulator">
      <div style="font-weight: bold; margin-bottom: 8px; font-size: 12px">快速切换尺寸:</div>
      <button class="size-btn" onclick="simulateSize(320, 568)">iPhone 5</button>
      <button class="size-btn" onclick="simulateSize(375, 667)">iPhone 8</button>
      <button class="size-btn" onclick="simulateSize(414, 896)">iPhone 11</button>
      <button class="size-btn" onclick="simulateSize(768, 1024)">iPad</button>
      <button class="size-btn" onclick="simulateSize(1024, 768)">iPad 横屏</button>
      <button class="size-btn" onclick="simulateSize(1920, 1080)">桌面</button>
      <button class="size-btn active" onclick="resetSize()">原始尺寸</button>
    </div>

    <div class="instructions">
      <h4>🎯 测试说明</h4>
      <ul>
        <li>点击"显示/隐藏手机"查看效果</li>
        <li>使用快速切换按钮模拟不同设备</li>
        <li>调整浏览器窗口大小观察自适应</li>
        <li>查看右上角的实时缩放信息</li>
        <li>在移动设备上测试横竖屏切换</li>
      </ul>
    </div>

    <!-- 引入手机界面脚本 -->
    <script src="apps/phone-interface.js"></script>

    <script>
      let originalSize = { width: window.innerWidth, height: window.innerHeight };

      // 更新控制面板信息
      function updateControls() {
        const width = window.innerWidth;
        const height = window.innerHeight;

        $('#screen_size').text(`${width} × ${height}`);

        // 获取当前缩放比例
        const $phone = $('#phone_interface');
        if ($phone.length > 0) {
          const scale = $phone.css('--phone-scale') || '1';
          $('#scale_ratio').text(`${(parseFloat(scale) * 100).toFixed(0)}%`);
        } else {
          $('#scale_ratio').text('未初始化');
        }

        // 判断设备类型
        let deviceType = '桌面';
        if (width <= 480) deviceType = '手机';
        else if (width <= 768) deviceType = '小平板';
        else if (width <= 1024) deviceType = '平板';
        else if (width <= 1440) deviceType = '笔记本';
        else deviceType = '大屏幕';

        $('#device_type').text(deviceType);
      }

      // 切换手机显示
      function togglePhone() {
        if (window.PhoneInterface) {
          const $phone = $('#phone_interface');
          if ($phone.hasClass('show')) {
            window.PhoneInterface.hide();
          } else {
            window.PhoneInterface.show();
          }
          setTimeout(updateControls, 100);
        }
      }

      // 刷新缩放
      function refreshScale() {
        if (window.PhoneInterface && window.PhoneInterface.updateResponsiveScale) {
          window.PhoneInterface.updateResponsiveScale();
          setTimeout(updateControls, 100);
        }
      }

      // 重置视图
      function resetView() {
        resetSize();
        if (window.PhoneInterface) {
          window.PhoneInterface.hide();
        }
      }

      // 模拟不同屏幕尺寸
      function simulateSize(width, height) {
        // 更新按钮状态
        $('.size-btn').removeClass('active');
        event.target.classList.add('active');

        // 模拟窗口大小变化
        Object.defineProperty(window, 'innerWidth', {
          writable: true,
          configurable: true,
          value: width,
        });
        Object.defineProperty(window, 'innerHeight', {
          writable: true,
          configurable: true,
          value: height,
        });

        // 触发resize事件
        $(window).trigger('resize');
        setTimeout(updateControls, 100);

        // 显示提示信息
        if (width >= 1024) {
          console.log(`📱 大屏幕模式: ${width}x${height} - 手机界面保持原始尺寸，不会放大`);
        }
      }

      // 重置到原始尺寸
      function resetSize() {
        $('.size-btn').removeClass('active');
        $('.size-btn:last').addClass('active');

        Object.defineProperty(window, 'innerWidth', {
          writable: true,
          configurable: true,
          value: originalSize.width,
        });
        Object.defineProperty(window, 'innerHeight', {
          writable: true,
          configurable: true,
          value: originalSize.height,
        });

        $(window).trigger('resize');
        setTimeout(updateControls, 100);
      }

      // 页面初始化
      $(document).ready(function () {
        console.log('响应式缩放演示页面加载完成');

        // 保存原始窗口尺寸
        originalSize = { width: window.innerWidth, height: window.innerHeight };

        // 初始化手机界面
        if (window.PhoneInterface) {
          window.PhoneInterface.init();
          console.log('✅ 手机界面初始化完成');
        } else {
          setTimeout(() => {
            if (window.PhoneInterface) {
              window.PhoneInterface.init();
              console.log('✅ 手机界面初始化完成（延迟）');
            }
          }, 1000);
        }

        // 更新控制面板
        updateControls();

        // 监听窗口变化
        $(window).on('resize orientationchange', function () {
          setTimeout(updateControls, 100);
        });

        // 定期更新信息
        setInterval(updateControls, 2000);
      });
    </script>
  </body>
</html>
